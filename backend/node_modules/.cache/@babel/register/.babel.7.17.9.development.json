{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\golde\\\\Desktop\\\\Code\\\\Repo\\\\Final-Project\\\\Final-Project\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\golde\\\\Desktop\\\\Code\\\\Repo\\\\Final-Project\\\\Final-Project\\\\backend\",\"filename\":\"C:\\\\Users\\\\golde\\\\Desktop\\\\Code\\\\Repo\\\\Final-Project\\\\Final-Project\\\\backend\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\golde\\\\Desktop\\\\Code\\\\Repo\\\\Final-Project\\\\Final-Project\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar mongoUrl = process.env.MONGO_URL || \"mongodb://localhost/final-project\";\n\n_mongoose[\"default\"].connect(mongoUrl, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\n_mongoose[\"default\"].Promise = Promise; // Defines the port the app will run on. Defaults to 8080, but can be overridden\n// when starting the server. Example command to overwrite PORT env variable value:\n// PORT=9000 npm start\n\nvar port = process.env.PORT || 8080;\nvar app = (0, _express[\"default\"])(); // Add middlewares to enable cors and json body parsing\n\napp.use((0, _cors[\"default\"])());\napp.use(_express[\"default\"].json()); /////// Monday\n\nvar UserSchema = new _mongoose[\"default\"].Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true /// My_B4nK_P4$$word\n\n  },\n  // npm install crypto\n  accessToken: {\n    type: String,\n    \"default\": function _default() {\n      return _crypto[\"default\"].randomBytes(128).toString(\"hex\");\n    }\n  }\n});\n\nvar User = _mongoose[\"default\"].model(\"User\", UserSchema);\n\napp.post(\"/register\", /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n    var _req$body, username, password, salt, newUser;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _req$body = req.body, username = _req$body.username, password = _req$body.password; // npm install bcrypt\n            // const code = [1, 2, 4, 4];\n            // const makeCodeSecret = (codeArr) => {\n            // const secretMessage = codeArr.map(singleNumber => singleNumber + 1);\n            // return secretMessage\n            //}\n            // transformedCode = makeCodeSecret(code)\n\n            _context.prev = 1;\n            salt = _bcrypt[\"default\"].genSaltSync();\n\n            if (!(password.length < 8)) {\n              _context.next = 7;\n              break;\n            }\n\n            res.status(400).json({\n              success: false,\n              response: \"Password must be at least 8 characters long\"\n            });\n            _context.next = 11;\n            break;\n\n          case 7:\n            _context.next = 9;\n            return new User({\n              username: username,\n              password: _bcrypt[\"default\"].hashSync(password, salt)\n            }).save();\n\n          case 9:\n            newUser = _context.sent;\n            res.status(201).json({\n              success: true,\n              response: {\n                username: newUser.username,\n                accessToken: newUser.accessToken,\n                id: newUser._id\n              }\n            });\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](1);\n            res.status(400).json({\n              success: false,\n              response: _context.t0\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.post(\"/login\", /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res) {\n    var _req$body2, username, password, user;\n\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _req$body2 = req.body, username = _req$body2.username, password = _req$body2.password;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return User.findOne({\n              username: username\n            });\n\n          case 4:\n            user = _context2.sent;\n\n            if (user && _bcrypt[\"default\"].compareSync(password, user.password)) {\n              res.status(200).json({\n                success: true,\n                response: {\n                  username: user.username,\n                  id: user._id,\n                  accessToken: user.accessToken\n                }\n              });\n            } else {\n              res.status(400).json({\n                success: false,\n                response: \"Credentials didn't match\"\n              });\n            }\n\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](1);\n            res.status(500).json({\n              success: false,\n              response: _context2.t0\n            });\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 8]]);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar authenticateUser = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res, next) {\n    var accessToken, user;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            accessToken = req.header(\"Authorization\");\n            _context3.prev = 1;\n            _context3.next = 4;\n            return User.findOne({\n              accessToken: accessToken\n            });\n\n          case 4:\n            user = _context3.sent;\n\n            if (user) {\n              next();\n            } else {\n              res.status(401).json({\n                response: \"Please log in\",\n                success: false\n              });\n            }\n\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](1);\n            res.status(400).json({\n              response: _context3.t0,\n              success: false\n            });\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 8]]);\n  }));\n\n  return function authenticateUser(_x5, _x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar ThoughtSchema = new _mongoose[\"default\"].Schema({\n  message: {\n    type: String\n  },\n  createdAt: {\n    type: Date,\n    \"default\": function _default() {\n      return new Date();\n    }\n  },\n  hearts: {\n    type: Number,\n    \"default\": 0\n  }\n});\n\nvar Thought = _mongoose[\"default\"].model(\"Thought\", ThoughtSchema);\n\napp.get(\"/thoughts\", authenticateUser);\napp.get(\"/thoughts\", /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(req, res) {\n    var thoughts;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return Thought.find({});\n\n          case 2:\n            thoughts = _context4.sent;\n            res.status(200).json({\n              success: true,\n              response: thoughts\n            });\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x8, _x9) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp.post(\"/thoughts\", authenticateUser);\napp.post(\"/thoughts\", /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req, res) {\n    var message, newThought;\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            message = req.body.message;\n            _context5.prev = 1;\n            _context5.next = 4;\n            return new Thought({\n              message: message\n            }).save();\n\n          case 4:\n            newThought = _context5.sent;\n            res.status(201).json({\n              success: true,\n              response: newThought\n            });\n            _context5.next = 11;\n            break;\n\n          case 8:\n            _context5.prev = 8;\n            _context5.t0 = _context5[\"catch\"](1);\n            res.status(400).json({\n              success: false,\n              response: _context5.t0\n            });\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[1, 8]]);\n  }));\n\n  return function (_x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}()); ///////\n// Start defining your routes here\n\napp.get(\"/\", function (req, res) {\n  res.send(\"Hello Technigo!\");\n}); // Start the server\n\napp.listen(port, function () {\n  console.log(\"Server running on http://localhost:\".concat(port));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJtb25nb1VybCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkwiLCJtb25nb29zZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJQcm9taXNlIiwicG9ydCIsIlBPUlQiLCJhcHAiLCJ1c2UiLCJleHByZXNzIiwianNvbiIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiYWNjZXNzVG9rZW4iLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiVXNlciIsIm1vZGVsIiwicG9zdCIsInJlcSIsInJlcyIsImJvZHkiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJsZW5ndGgiLCJzdGF0dXMiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJoYXNoU3luYyIsInNhdmUiLCJuZXdVc2VyIiwiaWQiLCJfaWQiLCJmaW5kT25lIiwidXNlciIsImNvbXBhcmVTeW5jIiwiYXV0aGVudGljYXRlVXNlciIsIm5leHQiLCJoZWFkZXIiLCJUaG91Z2h0U2NoZW1hIiwibWVzc2FnZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJoZWFydHMiLCJOdW1iZXIiLCJUaG91Z2h0IiwiZ2V0IiwiZmluZCIsInRob3VnaHRzIiwibmV3VGhvdWdodCIsInNlbmQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLElBQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFNBQVosSUFBeUIsbUNBQTFDOztBQUNBQyxxQkFBU0MsT0FBVCxDQUFpQkwsUUFBakIsRUFBMkI7QUFBRU0sRUFBQUEsZUFBZSxFQUFFLElBQW5CO0FBQXlCQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUE3QyxDQUEzQjs7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R1pvQixZQUFBQSxVQUhZO0FBSWxCOUIsWUFBQUEsR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQnZCLElBQWhCLENBQXFCO0FBQUN3QixjQUFBQSxPQUFPLEVBQUUsSUFBVjtBQUFnQkMsY0FBQUEsUUFBUSxFQUFFc0I7QUFBMUIsYUFBckI7QUFKa0I7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFNbEI5QixZQUFBQSxHQUFHLENBQUNNLE1BQUosQ0FBVyxHQUFYLEVBQWdCdkIsSUFBaEIsQ0FBcUI7QUFBQ3dCLGNBQUFBLE9BQU8sRUFBRSxLQUFWO0FBQWlCQyxjQUFBQSxRQUFRO0FBQXpCLGFBQXJCOztBQU5rQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUF0Qjs7QUFBQTtBQUFBO0FBQUE7QUFBQSxLLENBVUE7QUFDQTs7QUFDQTVCLEdBQUcsQ0FBQytDLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBQzVCLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ3pCQSxFQUFBQSxHQUFHLENBQUMrQixJQUFKLENBQVMsaUJBQVQ7QUFDRCxDQUZELEUsQ0FJQTs7QUFDQW5ELEdBQUcsQ0FBQ29ELE1BQUosQ0FBV3RELElBQVgsRUFBaUIsWUFBTTtBQUNyQnVELEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUiw4Q0FBa0R4RCxJQUFsRDtBQUNELENBRkQiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxnb2xkZVxcRGVza3RvcFxcQ29kZVxcUmVwb1xcRmluYWwtUHJvamVjdFxcRmluYWwtUHJvamVjdFxcYmFja2VuZFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xuXG5jb25zdCBtb25nb1VybCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTCB8fCBcIm1vbmdvZGI6Ly9sb2NhbGhvc3QvZmluYWwtcHJvamVjdFwiO1xubW9uZ29vc2UuY29ubmVjdChtb25nb1VybCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KTtcbm1vbmdvb3NlLlByb21pc2UgPSBQcm9taXNlO1xuXG4vLyBEZWZpbmVzIHRoZSBwb3J0IHRoZSBhcHAgd2lsbCBydW4gb24uIERlZmF1bHRzIHRvIDgwODAsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlblxuLy8gd2hlbiBzdGFydGluZyB0aGUgc2VydmVyLiBFeGFtcGxlIGNvbW1hbmQgdG8gb3ZlcndyaXRlIFBPUlQgZW52IHZhcmlhYmxlIHZhbHVlOlxuLy8gUE9SVD05MDAwIG5wbSBzdGFydFxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgODA4MDtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gQWRkIG1pZGRsZXdhcmVzIHRvIGVuYWJsZSBjb3JzIGFuZCBqc29uIGJvZHkgcGFyc2luZ1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4vLy8vLy8vIE1vbmRheVxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB1c2VybmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB1bmlxdWU6IHRydWVcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgICAvLy8gTXlfQjRuS19QNCQkd29yZFxuICB9LFxuICAvLyBucG0gaW5zdGFsbCBjcnlwdG9cbiAgYWNjZXNzVG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogKCkgPT4gY3J5cHRvLnJhbmRvbUJ5dGVzKDEyOCkudG9TdHJpbmcoXCJoZXhcIilcbiAgfVxufSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbChcIlVzZXJcIiwgVXNlclNjaGVtYSk7XG5cbmFwcC5wb3N0KFwiL3JlZ2lzdGVyXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4vLyBucG0gaW5zdGFsbCBiY3J5cHRcbi8vIGNvbnN0IGNvZGUgPSBbMSwgMiwgNCwgNF07XG4vLyBjb25zdCBtYWtlQ29kZVNlY3JldCA9IChjb2RlQXJyKSA9PiB7XG4gICAgLy8gY29uc3Qgc2VjcmV0TWVzc2FnZSA9IGNvZGVBcnIubWFwKHNpbmdsZU51bWJlciA9PiBzaW5nbGVOdW1iZXIgKyAxKTtcbiAgICAvLyByZXR1cm4gc2VjcmV0TWVzc2FnZVxuLy99XG4vLyB0cmFuc2Zvcm1lZENvZGUgPSBtYWtlQ29kZVNlY3JldChjb2RlKVxuICB0cnkge1xuICAgIGNvbnN0IHNhbHQgPSBiY3J5cHQuZ2VuU2FsdFN5bmMoKTtcbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgcmVzcG9uc2U6IFwiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZ1wiXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IG5ldyBVc2VyKHt1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBiY3J5cHQuaGFzaFN5bmMocGFzc3dvcmQsIHNhbHQpfSkuc2F2ZSgpO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgIHVzZXJuYW1lOiBuZXdVc2VyLnVzZXJuYW1lLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiBuZXdVc2VyLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgIGlkOiBuZXdVc2VyLl9pZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHJlc3BvbnNlOiBlcnJvclxuICAgICAgfSk7XG4gIH1cbn0pO1xuXG5hcHAucG9zdChcIi9sb2dpblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7dXNlcm5hbWV9KTtcbiAgICBpZiAodXNlciAmJiBiY3J5cHQuY29tcGFyZVN5bmMocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgaWQ6IHVzZXIuX2lkLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiB1c2VyLmFjY2Vzc1Rva2VuXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICByZXNwb25zZTogXCJDcmVkZW50aWFscyBkaWRuJ3QgbWF0Y2hcIlxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgcmVzcG9uc2U6IGVycm9yXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5jb25zdCBhdXRoZW50aWNhdGVVc2VyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gcmVxLmhlYWRlcihcIkF1dGhvcml6YXRpb25cIik7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7YWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VufSk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIG5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICByZXNwb25zZTogXCJQbGVhc2UgbG9nIGluXCIsXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICByZXNwb25zZTogZXJyb3IsXG4gICAgICBzdWNjZXNzOiBmYWxzZVxuICAgIH0pXG4gIH1cbn1cblxuY29uc3QgVGhvdWdodFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBtZXNzYWdlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBjcmVhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6ICgpID0+IG5ldyBEYXRlKCkgXG4gIH0sXG4gIGhlYXJ0czoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH1cbn0pOyBcblxuXG5jb25zdCBUaG91Z2h0ID0gbW9uZ29vc2UubW9kZWwoXCJUaG91Z2h0XCIsIFRob3VnaHRTY2hlbWEpO1xuXG5hcHAuZ2V0KFwiL3Rob3VnaHRzXCIsIGF1dGhlbnRpY2F0ZVVzZXIpO1xuYXBwLmdldChcIi90aG91Z2h0c1wiLCBhc3luYyAocmVxLCByZXMpPT4ge1xuICBjb25zdCB0aG91Z2h0cyA9IGF3YWl0IFRob3VnaHQuZmluZCh7fSk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtzdWNjZXNzOiB0cnVlLCByZXNwb25zZTogdGhvdWdodHN9KTtcbn0pO1xuXG5hcHAucG9zdChcIi90aG91Z2h0c1wiLCBhdXRoZW50aWNhdGVVc2VyKVxuYXBwLnBvc3QoXCIvdGhvdWdodHNcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgbWVzc2FnZSB9ID0gcmVxLmJvZHk7XG4gIHRyeSB7XG4gICAgY29uc3QgbmV3VGhvdWdodCA9IGF3YWl0IG5ldyBUaG91Z2h0KHttZXNzYWdlfSkuc2F2ZSgpO1xuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtzdWNjZXNzOiB0cnVlLCByZXNwb25zZTogbmV3VGhvdWdodH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtzdWNjZXNzOiBmYWxzZSwgcmVzcG9uc2U6IGVycm9yfSk7XG4gIH1cbn0pO1xuXG4vLy8vLy8vXG4vLyBTdGFydCBkZWZpbmluZyB5b3VyIHJvdXRlcyBoZXJlXG5hcHAuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnNlbmQoXCJIZWxsbyBUZWNobmlnbyFcIik7XG59KTtcblxuLy8gU3RhcnQgdGhlIHNlcnZlclxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKTtcbn0pO1xuIl19","map":{"version":3,"sources":["server.js"],"names":["mongoUrl","process","env","MONGO_URL","mongoose","connect","useNewUrlParser","useUnifiedTopology","Promise","port","PORT","app","use","express","json","UserSchema","Schema","username","type","String","required","unique","password","accessToken","crypto","randomBytes","toString","User","model","post","req","res","body","salt","bcrypt","genSaltSync","length","status","success","response","hashSync","save","newUser","id","_id","findOne","user","compareSync","authenticateUser","next","header","ThoughtSchema","message","createdAt","Date","hearts","Number","Thought","get","find","thoughts","newThought","send","listen","console","log"],"mappings":"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","sourceRoot":"C:\\Users\\golde\\Desktop\\Code\\Repo\\Final-Project\\Final-Project\\backend\\","sourcesContent":["import express from \"express\";\nimport cors from \"cors\";\nimport mongoose from \"mongoose\";\nimport crypto from \"crypto\";\nimport bcrypt from \"bcrypt\";\n\nconst mongoUrl = process.env.MONGO_URL || \"mongodb://localhost/final-project\";\nmongoose.connect(mongoUrl, { useNewUrlParser: true, useUnifiedTopology: true });\nmongoose.Promise = Promise;\n\n// Defines the port the app will run on. Defaults to 8080, but can be overridden\n// when starting the server. Example command to overwrite PORT env variable value:\n// PORT=9000 npm start\nconst port = process.env.PORT || 8080;\nconst app = express();\n\n// Add middlewares to enable cors and json body parsing\napp.use(cors());\napp.use(express.json());\n/////// Monday\nconst UserSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n    /// My_B4nK_P4$$word\n  },\n  // npm install crypto\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString(\"hex\")\n  }\n});\n\nconst User = mongoose.model(\"User\", UserSchema);\n\napp.post(\"/register\", async (req, res) => {\n  const { username, password } = req.body;\n// npm install bcrypt\n// const code = [1, 2, 4, 4];\n// const makeCodeSecret = (codeArr) => {\n    // const secretMessage = codeArr.map(singleNumber => singleNumber + 1);\n    // return secretMessage\n//}\n// transformedCode = makeCodeSecret(code)\n  try {\n    const salt = bcrypt.genSaltSync();\n    if (password.length < 8) {\n      res.status(400).json({\n        success: false,\n        response: \"Password must be at least 8 characters long\"\n      });\n    } else {\n      const newUser = await new User({username: username, password: bcrypt.hashSync(password, salt)}).save();\n      res.status(201).json({\n        success: true,\n        response: {\n          username: newUser.username,\n          accessToken: newUser.accessToken,\n          id: newUser._id\n        }\n      });\n    }\n  } catch(error) {\n      res.status(400).json({\n        success: false,\n        response: error\n      });\n  }\n});\n\napp.post(\"/login\", async (req, res) => {\n  const { username, password } = req.body;\n\n  try {\n    const user = await User.findOne({username});\n    if (user && bcrypt.compareSync(password, user.password)) {\n      res.status(200).json({\n        success: true,\n        response: {\n          username: user.username,\n          id: user._id,\n          accessToken: user.accessToken\n        }\n      });\n    } else {\n      res.status(400).json({\n        success: false,\n        response: \"Credentials didn't match\"\n      });\n    }\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      response: error\n    });\n  }\n});\n\nconst authenticateUser = async (req, res, next) => {\n  const accessToken = req.header(\"Authorization\");\n  try {\n    const user = await User.findOne({accessToken: accessToken});\n    if (user) {\n      next();\n    } else {\n      res.status(401).json({\n        response: \"Please log in\",\n        success: false\n      })\n    }\n  } catch (error) {\n    res.status(400).json({\n      response: error,\n      success: false\n    })\n  }\n}\n\nconst ThoughtSchema = new mongoose.Schema({\n  message: {\n    type: String,\n  },\n  createdAt: {\n    type: Date,\n    default: () => new Date() \n  },\n  hearts: {\n    type: Number,\n    default: 0\n  }\n}); \n\n\nconst Thought = mongoose.model(\"Thought\", ThoughtSchema);\n\napp.get(\"/thoughts\", authenticateUser);\napp.get(\"/thoughts\", async (req, res)=> {\n  const thoughts = await Thought.find({});\n  res.status(200).json({success: true, response: thoughts});\n});\n\napp.post(\"/thoughts\", authenticateUser)\napp.post(\"/thoughts\", async (req, res) => {\n  const { message } = req.body;\n  try {\n    const newThought = await new Thought({message}).save();\n    res.status(201).json({success: true, response: newThought});\n  } catch (error) {\n    res.status(400).json({success: false, response: error});\n  }\n});\n\n///////\n// Start defining your routes here\napp.get(\"/\", (req, res) => {\n  res.send(\"Hello Technigo!\");\n});\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n"]}},"mtime":1670847849744}}